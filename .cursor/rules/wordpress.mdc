---
alwaysApply: true
---

# WordPress & Tailwind - RÃ¨gles de dÃ©veloppement professionnel (Awwwards-ready)

## ğŸ¯ Philosophie gÃ©nÃ©rale

- **Performance first** : Chaque dÃ©cision doit Ãªtre Ã©valuÃ©e sous l'angle performance
- **Code maintenable** : Structure claire, conventions cohÃ©rentes, documentation
- **AccessibilitÃ©** : WCAG 2.1 AA minimum
- **Mobile-first** : Design et dÃ©veloppement mobile-first, desktop en enhancement
- **Progressive enhancement** : Le site fonctionne sans JS, JS amÃ©liore l'expÃ©rience

---

## ğŸ“ Architecture WordPress

### Structure des fichiers

```
theme/
â”œâ”€â”€ inc/
â”‚   â”œâ”€â”€ Classes/          # Classes PHP (PSR-4)
â”‚   â”œâ”€â”€ Traits/            # Traits rÃ©utilisables
â”‚   â”œâ”€â”€ Functions/         # Fonctions utilitaires
â”‚   â””â”€â”€ Hooks/             # Actions et filters
â”œâ”€â”€ parts/                 # Composants rÃ©utilisables PHP
â”‚   â”œâ”€â”€ navigation.php
â”‚   â”œâ”€â”€ hero.php
â”‚   â””â”€â”€ ...
â”œâ”€â”€ templates/             # Templates personnalisÃ©s
â”œâ”€â”€ blocks/                # Gutenberg blocks (si utilisÃ©)
â””â”€â”€ assets/
    â”œâ”€â”€ js/
    â”‚   â”œâ”€â”€ main.js        # Point d'entrÃ©e
    â”‚   â”œâ”€â”€ modules/       # Modules JS sÃ©parÃ©s
    â”‚   â””â”€â”€ utils/         # Utilitaires JS
    â””â”€â”€ css/
        â””â”€â”€ main.css       # Point d'entrÃ©e Tailwind
```

### Conventions de nommage PHP

- **Classes** : PascalCase, namespace `NL_THEME\Inc\Classes`
- **Fonctions** : snake*case avec prÃ©fixe `nl*`(ex:`nl_get_image_src()`)
- **Constantes** : UPPER*SNAKE_CASE avec prÃ©fixe `NL_THEME*`
- **Variables** : camelCase pour les variables, snake_case pour les fonctions WordPress
- **Fichiers** : PascalCase pour les classes, kebab-case pour les templates

```php
// âœ… BON
class Theme_Setup {
    const MAX_IMAGE_SIZE = 1920;

    public function enqueue_assets() {
        $asset_url = nl_get_asset_url('main.js');
    }
}

// âŒ MAUVAIS
class theme_setup {
    const maxImageSize = 1920;

    public function EnqueueAssets() {
        $assetUrl = getAssetUrl('main.js');
    }
}
```

### Patterns WordPress

- **Singleton** : Pour les classes principales (Theme, Assets, etc.)
- **Hooks** : Utiliser les hooks WordPress, Ã©viter les modifications directes du core
- **Transients** : Pour le cache des requÃªtes coÃ»teuses
- **Nonces** : Pour toutes les actions utilisateur
- **Sanitization** : Toujours sanitizer les entrÃ©es utilisateur
- **Escaping** : Toujours Ã©chapper les sorties

```php
// âœ… BON - Utilisation des hooks
add_action('wp_enqueue_scripts', [$this, 'enqueue_assets']);
add_filter('excerpt_length', [$this, 'custom_excerpt_length']);

// âœ… BON - Sanitization et escaping
$user_input = sanitize_text_field($_POST['name']);
echo esc_html($user_input);
echo esc_url($link);
echo esc_attr($attribute);
```

---

## ğŸ¨ Tailwind CSS - Conventions avancÃ©es

### Structure des classes

**Ordre recommandÃ©** (pour lisibilitÃ©) :

1. Layout (display, position, top/right/bottom/left, z-index)
2. Flexbox/Grid (flex, grid, gap)
3. Spacing (margin, padding)
4. Sizing (width, height, max-width, etc.)
5. Typography (font, text, line-height, letter-spacing)
6. Visual (background, border, shadow, opacity)
7. Misc (cursor, pointer-events, user-select)

```html
<!-- âœ… BON - Ordre logique -->
<div
  class="relative z-10 flex items-center gap-4 p-6 w-full max-w-5xl text-lg font-semibold bg-neutral-900 border border-neutral-800 rounded-lg shadow-xl"
>
  <!-- âŒ MAUVAIS - DÃ©sordonnÃ© -->
  <div
    class="bg-neutral-900 flex p-6 relative text-lg gap-4 z-10 items-center"
  ></div>
</div>
```

### Utilisation des composants Tailwind

**PrÃ©fÃ©rer les classes utilitaires** sauf pour les patterns rÃ©pÃ©titifs :

```html
<!-- âœ… BON - Classes utilitaires pour cas unique -->
<button
  class="px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors"
>
  <!-- âœ… BON - @layer components pour patterns rÃ©pÃ©titifs -->
  <!-- Dans main.css -->
  @layer components { .btn-primary { @apply px-6 py-3 bg-primary text-white
  rounded-lg hover:bg-primary/90 transition-colors; } }
</button>
```

### Design tokens personnalisÃ©s

**Toujours Ã©tendre le thÃ¨me Tailwind** plutÃ´t que d'utiliser des valeurs arbitraires :

```javascript
// tailwind.config.cjs
theme: {
  extend: {
    colors: {
      primary: {
        50: '#...',
        500: '#...',
        900: '#...',
      },
      neutral: {
        50: '#fafafa',
        950: '#0a0a0a',
      }
    },
    fontFamily: {
      sans: ['Inter', 'system-ui', 'sans-serif'],
      display: ['Space Grotesk', 'sans-serif'],
    },
    spacing: {
      '18': '4.5rem',
      '88': '22rem',
    },
    animation: {
      'fade-in': 'fadeIn 0.6s ease-out',
      'slide-up': 'slideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1)',
    }
  }
}
```

```html
<!-- âœ… BON - Utiliser les tokens -->
<div class="bg-primary-500 text-neutral-50 font-display">
  <!-- âŒ MAUVAIS - Valeurs arbitraires -->
  <div class="bg-[#ff6b6b] text-[#fafafa] font-['Space_Grotesk']"></div>
</div>
```

### Responsive design

**Mobile-first obligatoire** :

```html
<!-- âœ… BON - Mobile-first -->
<div class="text-sm md:text-base lg:text-lg xl:text-xl">
  <div class="p-4 md:p-6 lg:p-8">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3">
      <!-- âŒ MAUVAIS - Desktop-first -->
      <div class="text-xl lg:text-lg md:text-base text-sm"></div>
    </div>
  </div>
</div>
```

### Dark mode et thÃ¨mes

```html
<!-- Utiliser les variants dark: -->
<div
  class="bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-50"
></div>
```

---

## âš¡ Performance - RÃ¨gles strictes

### Images

- **Toujours utiliser `wp_get_attachment_image()`** avec les bonnes tailles
- **Lazy loading natif** : `loading="lazy"` (sauf above-the-fold)
- **Formats modernes** : WebP avec fallback, AVIF si supportÃ©
- **Responsive images** : `srcset` et `sizes` automatiques
- **Aspect ratio** : Utiliser `aspect-ratio` CSS pour Ã©viter le layout shift

```php
// âœ… BON
echo wp_get_attachment_image(
    $image_id,
    'large',
    false,
    [
        'class' => 'w-full h-auto',
        'loading' => 'lazy',
        'decoding' => 'async',
    ]
);
```

```html
<!-- âœ… BON - Aspect ratio pour Ã©viter layout shift -->
<div class="aspect-video bg-neutral-900">
  <img src="..." class="w-full h-full object-cover" loading="lazy" />
</div>
```

### JavaScript

- **Code splitting** : SÃ©parer les modules par fonctionnalitÃ©
- **Lazy loading** : Charger les modules non-critiques Ã  la demande
- **Debounce/Throttle** : Pour les Ã©vÃ©nements scroll/resize
- **RequestAnimationFrame** : Pour les animations fluides
- **Pas de jQuery** : Utiliser le vanilla JS moderne

```javascript
// âœ… BON - Code splitting
const initHeavyFeature = async () => {
  const { HeavyModule } = await import("./modules/HeavyModule");
  HeavyModule.init();
};

// âœ… BON - Debounce pour scroll
import { debounce } from "./utils/debounce";

window.addEventListener("scroll", debounce(handleScroll, 100));
```

### CSS

- **PurgeCSS** : ConfigurÃ© correctement dans Tailwind
- **Critical CSS** : Inline pour above-the-fold
- **Pas de CSS inline** : Sauf pour les valeurs dynamiques critiques
- **Utiliser les custom properties** : Pour les valeurs dynamiques

```css
/* âœ… BON - Custom properties pour valeurs dynamiques */
:root {
  --header-height: 80px;
}

header {
  height: var(--header-height);
}
```

### Fonts

- **Variable fonts** : PrÃ©fÃ©rer les fonts variables
- **Preload** : Pour les fonts critiques
- **font-display: swap** : Toujours
- **Subset** : Charger uniquement les caractÃ¨res nÃ©cessaires

```php
// âœ… BON - Preload des fonts critiques
add_action('wp_head', function() {
    echo '<link rel="preload" href="' . get_theme_file_uri('assets/fonts/inter.woff2') . '" as="font" type="font/woff2" crossorigin>';
}, 1);
```

---

## ğŸ­ Animations et transitions

### GSAP - Bonnes pratiques

- **ScrollTrigger** : Utiliser pour les animations au scroll
- **Performance** : PrÃ©fÃ©rer `transform` et `opacity` (GPU-accelerated)
- **Will-change** : Utiliser avec parcimonie, retirer aprÃ¨s animation
- **Cleanup** : Toujours nettoyer les ScrollTriggers au unmount

```javascript
// âœ… BON - Animation performante
gsap.from(element, {
  autoAlpha: 0, // opacity + visibility
  y: 40, // transform (GPU)
  duration: 1,
  ease: "power3.out",
  scrollTrigger: {
    trigger: element,
    start: "top 80%",
    toggleActions: "play none none reverse",
  },
  onComplete: () => {
    element.style.willChange = "auto"; // Cleanup
  },
});
```

### Lenis (Smooth scroll)

- **Toujours synchroniser avec ScrollTrigger** : `lenis.on('scroll', ScrollTrigger.update)`
- **Pause pendant les transitions** : `lenis.stop()` / `lenis.start()`
- **Configuration** : Ajuster `lerp` selon le projet (0.1-0.15 gÃ©nÃ©ralement)

```javascript
// âœ… BON - Synchronisation Lenis/ScrollTrigger
lenis.on("scroll", ScrollTrigger.update);

// âœ… BON - Pause pendant transition Barba
barba.hooks.beforeLeave(() => {
  lenis.stop();
});

barba.hooks.afterEnter(() => {
  lenis.start();
  window.scrollTo(0, 0);
});
```

### Barba.js (Page transitions)

- **Namespace** : Toujours dÃ©finir un namespace unique par page
- **Cleanup** : Nettoyer les event listeners et animations au leave
- **Scroll position** : RÃ©initialiser aprÃ¨s transition
- **Performance** : PrÃ©charger les pages au hover (optionnel)

```javascript
// âœ… BON - Transition avec cleanup
barba.init({
  transitions: [
    {
      name: "default",
      async leave({ current }) {
        // Cleanup animations
        ScrollTrigger.getAll().forEach((trigger) => trigger.kill());

        // Animation de sortie
        await gsap.to(current.container, {
          opacity: 0,
          duration: 0.6,
        });
      },
      async enter({ next }) {
        // RÃ©initialiser scroll
        window.scrollTo(0, 0);

        // RÃ©initialiser animations
        initScrollAnimations();
      },
    },
  ],
});
```

---

## â™¿ AccessibilitÃ©

### HTML sÃ©mantique

```html
<!-- âœ… BON - Structure sÃ©mantique -->
<header role="banner">
  <nav aria-label="Navigation principale">
    <ul>
      <li><a href="/">Accueil</a></li>
    </ul>
  </nav>
</header>

<main role="main">
  <article>
    <h1>Titre de l'article</h1>
  </article>
</main>

<footer role="contentinfo"></footer>
```

### ARIA et navigation clavier

- **Skip links** : Toujours ajouter un lien "Aller au contenu"
- **Focus visible** : Styles de focus clairs et visibles
- **Landmarks** : Utiliser les rÃ´les ARIA appropriÃ©s
- **Labels** : Toujours labeliser les Ã©lÃ©ments interactifs

```html
<!-- âœ… BON - Skip link -->
<a
  href="#main-content"
  class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-primary focus:text-white"
>
  Aller au contenu
</a>

<!-- âœ… BON - Focus visible -->
button:focus-visible { @apply outline-2 outline-offset-2 outline-primary; }
```

### Contraste et couleurs

- **WCAG AA** : Minimum 4.5:1 pour le texte normal, 3:1 pour le texte large
- **Pas de couleur seule** : Ne pas utiliser uniquement la couleur pour transmettre l'information
- **Focus states** : Toujours visibles

---

## ğŸ”§ Code quality

### PHP

- **PSR-12** : Standards de codage PHP
- **Type hints** : Utiliser les type hints partout
- **Docblocks** : Documenter les fonctions publiques
- **DRY** : Don't Repeat Yourself
- **Single Responsibility** : Une classe = une responsabilitÃ©

```php
// âœ… BON - Type hints et docblocks
/**
 * Enqueue les assets du thÃ¨me
 *
 * @param string $handle Le handle de l'asset
 * @param string $src    L'URL source
 * @param array  $deps   Les dÃ©pendances
 * @return void
 */
public function enqueue_asset(string $handle, string $src, array $deps = []): void {
    wp_enqueue_script($handle, $src, $deps, NL_THEME_VERSION, true);
}
```

### JavaScript

- **ES6+** : Utiliser les syntaxes modernes
- **Modules** : Tout en modules ES6
- **Const/Let** : Jamais de `var`
- **Arrow functions** : Pour les callbacks courts
- **Async/Await** : PrÃ©fÃ©rer Ã  Promise.then()
- **Error handling** : Toujours gÃ©rer les erreurs

```javascript
// âœ… BON - Code moderne
const fetchData = async (url) => {
  try {
    const response = await fetch(url);
    if (!response.ok) throw new Error("Network error");
    return await response.json();
  } catch (error) {
    console.error("Error fetching data:", error);
    return null;
  }
};
```

### Commentaires

- **Pourquoi, pas quoi** : Expliquer la raison, pas l'action
- **TODOs** : Marquer les TODOs avec contexte et prioritÃ©
- **ComplexitÃ©** : Commenter les algorithmes complexes

```javascript
// âœ… BON - Commentaire utile
// Utiliser requestAnimationFrame pour synchroniser avec le refresh rate
// du navigateur et Ã©viter les janky scrolls
requestAnimationFrame(updateScroll);

// âŒ MAUVAIS - Commentaire inutile
// Appelle requestAnimationFrame
requestAnimationFrame(updateScroll);
```

---

## ğŸ§ª Testing et validation

### Avant commit

- **Linter** : PHPCS, ESLint configurÃ©s
- **Build** : VÃ©rifier que `npm run build` fonctionne
- **Validation** : HTML, CSS valides
- **Performance** : Lighthouse score > 90
- **AccessibilitÃ©** : axe DevTools, aucun warning

### Checklist de dÃ©ploiement

- [ ] Tous les assets compilÃ©s (`npm run build`)
- [ ] Manifest Vite gÃ©nÃ©rÃ©
- [ ] Images optimisÃ©es
- [ ] Fonts prÃ©chargÃ©es
- [ ] Cache configurÃ©
- [ ] Analytics configurÃ©s (si nÃ©cessaire)
- [ ] 404 et erreurs gÃ©rÃ©es
- [ ] Mobile testÃ©
- [ ] Cross-browser testÃ© (Chrome, Firefox, Safari)

---

## ğŸ“ Conventions spÃ©cifiques Awwwards

### Performance cibles

- **Lighthouse Performance** : > 95
- **First Contentful Paint** : < 1.5s
- **Largest Contentful Paint** : < 2.5s
- **Time to Interactive** : < 3.5s
- **Cumulative Layout Shift** : < 0.1
- **Total Bundle Size** : < 200KB (gzipped)

### Animations

- **60fps** : Toutes les animations doivent tourner Ã  60fps
- **Respect prefers-reduced-motion** : Toujours vÃ©rifier
- **Performance budget** : Max 16ms par frame

```css
/* âœ… BON - Respect de prefers-reduced-motion */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
  }
}
```

### Micro-interactions

- **Feedback immÃ©diat** : Tous les Ã©lÃ©ments interactifs doivent avoir un feedback
- **Transitions fluides** : Utiliser des easing functions naturelles
- **Hover states** : Toujours dÃ©finis pour desktop

---

## ğŸš« Anti-patterns Ã  Ã©viter

### PHP

```php
// âŒ MAUVAIS - RequÃªte dans la boucle
while (have_posts()) {
    the_post();
    $meta = get_post_meta(get_the_ID(), 'custom_field', true); // N+1 queries
}

// âœ… BON - RequÃªte unique
$posts = get_posts(['meta_key' => 'custom_field']);
foreach ($posts as $post) {
    // ...
}
```

### JavaScript

```javascript
// âŒ MAUVAIS - Manipulation DOM excessive
for (let i = 0; i < 1000; i++) {
  element.innerHTML += "<div>" + i + "</div>";
}

// âœ… BON - Batch DOM updates
const fragment = document.createDocumentFragment();
for (let i = 0; i < 1000; i++) {
  const div = document.createElement("div");
  div.textContent = i;
  fragment.appendChild(div);
}
element.appendChild(fragment);
```

### CSS

```html
<!-- âŒ MAUVAIS - Styles inline (sauf valeurs dynamiques) -->
<div style="color: red; padding: 20px;">
  <!-- âŒ MAUVAIS - !important (sauf cas trÃ¨s spÃ©cifiques) -->
  .text { color: red !important; }
</div>
```

---

## ğŸ“š Ressources et rÃ©fÃ©rences

- **WordPress Codex** : https://codex.wordpress.org/
- **Tailwind Docs** : https://tailwindcss.com/docs
- **GSAP Docs** : https://greensock.com/docs/
- **Web.dev** : https://web.dev/
- **A11y Project** : https://www.a11yproject.com/
- **Can I Use** : https://caniuse.com/

---

## ğŸ¯ RÃ¨gle d'or

> **"Si tu doutes, choisis la solution la plus performante et la plus maintenable, pas la plus rapide Ã  coder."**
